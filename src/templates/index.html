{% extends 'base.html' %}

{% block head %}
<title>Sao Miguel Bus</title>
{% endblock %}

{% block body %}
<div class="tm-page-wrap mx-auto">
    <section class="tm-banner">
        <div class="tm-container-outer tm-banner-bg">
            <div class="container">

                <div class="row tm-banner-row tm-banner-row-header">
                    <div class="col-xs-12">
                        <div class="tm-banner-header">
                            <h1 class="text-uppercase tm-banner-title">Search a Bus</h1>
                            <img src="static/img/dots-3.png" alt="Dots">
                            <p class="tm-banner-subtitle">Find the best bus for you.</p>
                            <a href="#download" class="tm-down-arrow-link"><i class="fa fa-2x fa-angle-down tm-down-arrow"></i></a>       
                        </div>    
                    </div>  <!-- col-xs-12 -->                      
                </div> <!-- row -->
                <div class="row tm-banner-row" id="tm-section-search" id="search">

                    <form action="index.html" method="get" class="tm-search-form tm-section-pad-2">
                        <div class="form-row tm-search-form-row">                                
                            <div class="form-group tm-form-group tm-form-group-pad tm-form-group-1">
                                <label for="origin-choice">From</label><i style="color: grey; font-style: italic">*</i>
                                <input name="origin" value="{{origin}}" list="origin-stops" class="form-control" id="origin" placeholder="Type your origin..." required>
                                <datalist name="origin" id="origin-stops">
                                    {% for stop in stops %}
                                    <option value="{{stop.name}}"></option>
                                    {% endfor %}
                                </datalist>
                            </div>
                            <div class="form-group tm-form-group tm-form-group-pad tm-form-group-1">
                                <label for="destination">To</label><i style="color: grey; font-style: italic">*</i>
                                <input name="destination" value="{{destination}}" list="destination-stops" type="text" class="form-control" id="destination" placeholder="Type your destination..." required>
                                <datalist name="destination" id="destination-stops">
                                    {% for stop in stops %}
                                    <option value="{{stop.name}}"></option>
                                    {% endfor %}
                                </datalist>
                            </div>
                            <div class="form-group tm-form-group tm-form-group-1">                                    
                                <div class="form-group tm-form-group tm-form-group-pad tm-form-group-2">
                                    <label for="day">Day of the Week</label><i style="color: grey; font-style: italic">*</i>
                                    {% if day == 3 %}
                                    <select name="day" class="form-control tm-select" id="day">
                                        <option value="1" selected>Weekday</option>
                                        <option value="2">Saturday</option>
                                        <option value="3" selected>Sunday/Holiday</option>
                                    </select>  
                                    {% elif  day == 2 %}
                                    <select name="day" class="form-control tm-select" id="day">
                                        <option value="1">Weekday</option>
                                        <option value="2" selected>Saturday</option>
                                        <option value="3">Sunday/Holiday</option>
                                    </select>  
                                    {% else %}
                                    <select name="day" class="form-control tm-select" id="day">
                                        <option value="1" selected>Weekday</option>
                                        <option value="2">Saturday</option>
                                        <option value="3">Sunday/Holiday</option>
                                    </select>  
                                    {% endif %}                                      
                                </div>
                            </div>
                            <div class="form-group tm-form-group tm-form-group-1">                                    
                                <div class="form-group tm-form-group tm-form-group-pad tm-form-group-2">
                                    <label for="time">What time?</label> <i style="color: grey; font-style: italic">Optional</i>
                                    <input class="form-control tm-select" value="{{time}}" type="time" id="time" name="time">                                   
                                </div>
                            </div>
                        </div> <!-- form-row -->
                        <div class="form-row tm-search-form-row">
                            <div class="form-group tm-form-group tm-form-group-pad tm-form-group-1">
                                <label for="btnSubmit">&nbsp;</label>
                                <button class="btn btn-primary tm-btn tm-btn-search text-uppercase" id="btnSubmit">Search for a Bus</button>                             
                                <text style="color: grey; font-style: italic; text-align: right;">Only direct routes are displayed</text>
                            </div>
                        </div>                              
                    </form>                             

                </div> <!-- row -->
                <div class="tm-banner-overlay"></div>
            </div>  <!-- .container -->                   
        </div>     <!-- .tm-container-outer -->                 
    </section>
    {% if nRoutes == 0 %}
    <section class="tm-section tm-section-pad-2 tm-section-2">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <h3 class="text-uppercase tm-section-title">No direct routes found from <b>{{origin}}</b> to <b>{{destination}}</b></h3>
                    <p class="tm-section-subtitle">Please be careful with the spelling. Choose on Stop from the Options displayed</p>
                </div>
            </div>
        </div>
    {% endif %}

    {% if routes|length > 0 %}
        {% for route in routes %}
            <div class="card w-75 center">
                <div class="card-body">
                    <h5 class="card-title">{{route.route}}</h5>
                    <p class="card-text">{{route.origin}}</h5>
                    <p class="card-text">{{route.destination}}</h5>
                    <p class="card-text">{{route.start}}</h5>
                </div>
                <input class="spoilerbutton" type="button" value="Details" onclick="this.value=this.value=='Details'?'Hide':'Details';">
                <div class="spoiler"><div>
                    {% for stop, time in route.stops.items() %}
                        <b>{{stop}}</b>: {{time}} <br />
                    {% endfor %}
                </div></div>
                {% if route.information|length > 0 %}
                    <text style="color: red">{{route.information}}</text>
                {% endif %}
            </div>
        {% endfor %}
    {% endif %}
</div> <!-- .main-content -->
{% endblock %}
